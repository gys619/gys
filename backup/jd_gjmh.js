/*
国际盲盒
活动入口：京东APP首页-京东国际-国际盲盒
活动时间：2021-02-23 - 2021-03-01
因为活动助力方式，找不出比较好的方法解决助力问题，所以默认不助力直接开奖。

后续发布脚本均有加密
因为我介意别人把我脚本里的助力改了。
如果不愿意助力，可以直接下载脚本到本地，通过修改helpAhtor这个参数来关闭助力请求。
请不要修改我的助力。
脚本内置了一个给作者任务助力的网络请求，默认开启，如介意请自行关闭。
助力活动链接： https://h5.m.jd.com/babelDiy/Zeus/4ZK4ZpvoSreRB92RRo8bpJAQNoTq/index.html
参数 helpAuthor = false

更新地址：https://raw.githubusercontent.com/monk-coder/dust/dust/i-chenzhe/jd_gjmh.js
已支持IOS双京东账号, Node.js支持N个京东账号
脚本兼容: QuantumultX, Surge, Loon, 小火箭，JSBox, Node.js
============Quantumultx===============
[task_local]
#国际盲盒
10 13 * 2-3 * https://raw.githubusercontent.com/monk-coder/dust/dust/i-chenzhe/jd_gjmh.js, tag=国际盲盒, enabled=true
================Loon==============
[Script]
cron "10 13 * 2-3 *" script-path=https://raw.githubusercontent.com/monk-coder/dust/dust/i-chenzhe/jd_gjmh.js, tag=国际盲盒
===============Surge=================
国际盲盒 = type=cron,cronexp="10 13 * 2-3 *",wake-system=1,timeout=3600,script-path=https://raw.githubusercontent.com/monk-coder/dust/dust/i-chenzhe/jd_gjmh.js
============小火箭=========
国际盲盒 = type=cron,script-path=https://raw.githubusercontent.com/monk-coder/dust/dust/i-chenzhe/jd_gjmh.js, cronexpr="10 13 * 2-3 *", timeout=3600, enable=true
 */
const $ = new Env('国际盲盒');
const jdCookieNode = $.isNode() ? require('./jdCookie.js') : '';
let cookiesArr = [], cookie = '', message;
let helpAuthor = true;
if ($.isNode()) {
    Object.keys(jdCookieNode).forEach((item) => {
        cookiesArr.push(jdCookieNode[item])
    })
    if (process.env.JD_DEBUG && process.env.JD_DEBUG === 'false') console.log = () => { };
} else {
    let cookiesData = $.getdata('CookiesJD') || "[]";
    cookiesData = JSON.parse(cookiesData);
    cookiesArr = cookiesData.map(item => item.cookie);
    cookiesArr.reverse();
    cookiesArr.push(...[$.getdata('CookieJD2'), $.getdata('CookieJD')]);
    cookiesArr.reverse();
    cookiesArr = cookiesArr.filter(item => item !== "" && item !== null && item !== undefined);
}
 var _0xodO='jsjiami.com.v6',_0x231c=[_0xodO,'FMKmw6HCjcOC','JsOCwpBRQg==','QMK7wrkQKcOPE+W9juWnh+OBkuS4p+S5o+i2nOWNgg==','w4TDm3gMdw==','w4vCk1tnwrcNwqYj','w6fCiQ/DvsKdw4bDksKmw6Mh','w4ktTjBfScOb','w47Cp8KW','44G05o+j56S744ObBsKMw5PDnF3DtOW3qeWljOaVtQ==','5Lmj5Lug6Laf5Y6H','w4nDtmgwQQ==','wrrDqsOVw5dNw5o9w7k=','wrDorb7phbzmlIXnmrHlvZ/ojbHljqI7woVlw4XCpzzDpsKyCSw3wpnDn8KIBS3DvhlCfcOMw5rDtsKQeMO8w4PDhcKTw78lwpBew7vDiHEFw77Cs8Oewp1gJcOg','W1whV8OR','RcKnw7toFMKe','HMOowrQs','woHCvhDCnsOKXeW3n+Wmg+aWnnxTwqE=','w7UtZy12QcOYCQ==','5LmH5LiD6LSh5Y+C','wp4bMxPCkA==','J8O6wrw7w65pFmE=','woPorrzphrzmlY7nm5Xlv7nojYjljbhAWcOhwrAZwpw=','w7xJcsOk','w4XCmOWlk+i1qVQj5YyF5ZiDwqTCoA==','DEd1wroWw5nCk8KYVcOhclNPSn8hwpYcwpg/w6Iiw78gwoAHw7zDsMK0wrvCuMKBw7pMOsKswqss','w5dmDMOEc8Olwr1AwqjCjT7Cjg==','VyXCkw3DvsOZw77Dg1sYwpwlfBbDucOCcy4m','ScKwwpEcw6/CtS/DlsKQBQ==','w5dXLMKrPsOXSBlIbsOTwojCrsKnwrY2wqlGwp1OwonDvsOQIMOMw7/Dim/DosOgw4tVIMOKFMKVwr1WAhbCusOuHD0TwqTCkSfDtEPDqcKFccKQZMOcw7LDqMKtwrrCnTPDl8Ofw6FHWBrCq07Dum/ClsOkw5bCtMKYwpbDpcOTBxnCkB8Xwp/DhiFBwo4DUsK0wq4Gw5Jjw6x4FlvCpcOywrfCm0/DvkzCgcKAw7nCtlIFRMObw6nDvMO8wqh/WMKJa3tRwovCg8OtwqnCv8OadiNAe8OIw7tLNEXDj0PCucKNwoN+wpjDjsKfw4hlBUvDksOMw5bDksOKDcOuwpvCl3XDqkPDsADCmcKQBR7Dm8KHw7/DgsK9wpBGAC3DkD0twog2EMOPfVwbScKDwozDtsKmMErDoHVDN8KcfHzCp8KcJTYjwoo4JUAOwpwjw67CncOkw43DpcOBworCgsKYw6pLw6dRFsKwwrMIBcKWJkDCpcKkw6JnwrlVwpUAailYeMK4w53CrA/DqcKNaj5iFcK+LsOfw6TDiW3DpmzDnXYJTyUlNcOyDhrCjsOFwoguwqtnw7sLw5MjwoLDpg==','wqkTw6EiYA==','SsKhwoAcwrHDrmzCkMKHEMOjDgY6VMOtPcKhYsKKw5dwIMKHw78uJMKGakooCMKdw5DCksKuw5M=','wr/DlBdsdD3CvsOfHsOjw5t9w6g5OMKj','J2JATcKsK8O9w4nCiA==','WBbCpinDpg==','w5nCkMKQwrrCng==','SsKhwoAcwrHDrmzCkMKHEMOjDhkmTMOoasOsbsKIwpU8JsKKwrQiMcOabEg1D8Odw5o=','LcOcw5x/UA==','w4HCpcKOw4Yb','FsKCw7jCtMOZ','ScK9w5BoNg==','O8KIDBFr','d2sFecOL','w5LDvcOFw4XCuTDDqVtZw5g/w5zDuSXCuMKzRSE/w5fDk8OHCmbDuDkFZ8KMw63CvMKHbsKywpnCsMKrwqIYwo5hw7rDv2YYwoLCkMKEw5tbGMOhw5lQw7HCsUzCn8KIwrnDgkJYwrXCs8OSIGxswr7CphInWUkhwo0zIhbDuTheW3LCmcKbCsOBw59ow4IvwpTCuCwlF8OvwqrDpMK8Z0rCs8Kjw4c=','wpBhBMKTI8O7w7FIw6jCiWzDhcKqwrXDpxk5NSPDl2JTwrFwwr81woPCrcKGw44=','wo9kwrViw7E=','w4YrbDxMScOaAsKvM8OKE8Ocw5PClMO1X8K2wpjCusOuOG87w5ZKYDNIIXFxJ8O1RUfDr8KiVAHDuX3Dv8KCSk8=','w4XCmhc/EHHDisKKw73ComtuKjZtAgvDpcKlDMKpasOZw5kMw5nDrHnCnMKjwpNzwqUbwrdsw5jDvsO4w5LDp8Oxc03CsA==','w5DDt38h','wpnDrS02Pw==','woXDihs4Eg==','wq3DkBVpcznCtsONDg==','wq7DixR0','wq1cwop/w78=','woICwrwAXg==','w7rCgUp0','bsO6w7wxwobDhg==','wpxqecOcdQ==','Kh5mJQ==','w5jCkcObG8Kow4c=','F0NtwqMR','w7DCtsKLw7I=','w53DoH/CjcKN','d30EeMOb','w5DDhXfCjQ==','IMOswqo=','cMKwwoc=','w7o/EMKKw5vDnw==','wopEwpxb','Dlpvwq0BwozDicO5QcO8aA==','w6pvwoTDnRw=','TwtiDHY=','wrEfGhrCuw==','w4dSW8OJbg==','wrLDiwA=','wrnDlcOaw5Za','EMKCBg==','woV0VXFd','w6VhP8Kweg==','wq3CuC8=','w4nDhXPCnA==','5p6l5q2q6L6h6KKy5Yef6Iyb5b2o','IcK6w7HCrMO8HQTCj8KtGsOGScOFwpA1FyVBwolt','SsK0woc+wqvCsyvDi8KpEMOvTg==','wrlew4sVDA==','wrfDlyhweDA=','wqxawptfw5Q=','RUXChw==','w75qcsOVQA==','w7PCrVRWwpo=','WcO3wpUPwrbCvTXDlsKSGcOJTxBtBMK2ZsOjdMKGw5EmZ8KBwr40aMOEPRpjSsKQw53CmcOiwow=','OcOlw6FTbcKCUCh1','NjbDiMKVEw==','wp0cORHCjMObD8Kzwp4fw4U=','w5x/C8KNesKkwqJqw7PCgyI=','w6HDqH3Cu8Kv','wqEewr80YjQ=','wrh7ccOpfjbDrsK7Z3LCnw==','Uz7CgDjDv8KR','w7bCosKGw5EDw4Y=','w5N+VsOkUQ==','5oCF5b+m5YmR5bab5pyG5p+45oiG5b2555mq55qU55qxw7s=','w6gyTy1e','w4DDgWo=','w5pEUsOzRQ==','w6VywqjDpR4=','wqFmbcOndD7DssKTaw==','w5fCksOBBMK6','cMO6w6Ejwp7Dmg==','wqLCmcOKA8KcS2k=','JsO+w7Q=','w4jDrMOCw4DCpn4=','w7tgwrE=','w6TDvFXCnMKc','FMKiw6bCncOLwrJ3','f2UkEsKd','w6zChU1gwpUY','w7JJIcK/','TsK6wpMpwrDCpg==','w5HDmn07Uw==','PMKvw7fCp8OZHgLCsMK1K8OCYw==','LcO0w6c=','wr3DvRFsRQ==','wrTDnsOYE8KJRXpAIMKDw7pew5rCuU4+wojDu3kqw6kEFEUjwofDn3cIWMOwGcOGOzTCo8Osw4bDuHTCnkg0','wq/DjF3CncOZworClw==','w4LDh3gMfcKcOg==','w4LDt3QcV31v','w6Y7FMKQw7zDicKcw6dH','HsOmwr4=','wrzCiMOLGcKTS2VPLQ==','AcOqwrFlUg==','AMOswqo8w4x8','w5DDoMOfw5LCrmXCszpEwoBi','woF7w7UHDDw7w6oHw5/ChA==','wo9+c1Q=','IMO4w71dZ8KKTAB5L8O4','Q8KKHWvCuAM=','w47DqMOCw57ChmPCtQA=','w47DmnEEYMK8ARjCnQ0=','YyF4P0o=','w63DrCIQbm0TwrNhDA==','wpnDswvClMOQU2TDlsO0Zg==','VQFDI0oC','DgLChUPCtH8Cbzl/ejPCvMKeOA==','wp/DkQc7JmbDucKMw7DDpCI=','w4wxZQ==','w5TDuX8+bWJwwqN8QMO/w4s=','wr7DjR4=','wrbCoi3CqsKAwqzCoj4Cw5HDjQ==','w4pSJMKv','6Iy+5Y6d5LqK5Ymf5Yq56KOE5aeO6LaL44Ch','KMOJwoA=','w7MzG8Krw7g=','PsOww6BRUcKQVw==','w5fDhWzCisKJ','w4HDmns=','w4wxZRpKUg==','BsOBHxVXL8OQNsOhwrE3w63Ck8KOFMOlBALDssOew4JBAsObwppyw6LDlsOnw6VBYg==','wqdRw6EjJw==','woLDoMOkw4Rww5A=','wpLCsA3ChsOG','wpbCsAzCnsOvUV7Dhg==','w7suAsKLw4LDmA==','w73DoiIQ','w5p5AsKvbMK5','6La/5oq06aKY5o+W77yO5peZ572i5Za444CG','wqc76LeP5oqC6aKW5o2877yp5pe057675ZWQ44OU','wqPCicOaG8KEbmNRGcKbw5Bfw7fCsgpr','WQLCklrCoWQ4aTtkfTjCocO1ZicKc2fCusOpw5XCl07CvcOiwog1LcOdw6PDvMKWw6XDgcOZw4QNUwrDkQoCw5jCkMOucMKYw4TDk8KlOGrCqcO3PMK3CwEcwqXDkcKfAWfDtF1zD8Kfw7I=','w63ClsO6NcKy','w5vDtzkAZQ==','w7lZwofDg8KT','wozDkkjCusOA','A1Z1','TgPClBTDvg==','TXXCt1PCmQ==','PBZhLw==','6Lee5oia6aCh5o6X776f5pap57+i5ZSh44CV','w4bDqm0yVH5uwrJB','wpl6dEBEwrI=','w7VHMcK7','w7RafsOmTsKkwrPDhxo=','wrlcw4cjwrIj','w7fCk2x8wooHwp41H8Kc','w5/DkG8cY8Km','MMKww7bCrA==','FlpywqE=','Q8KKHQ==','IVBAwoM1','w7NJPcKTPEI3','w5J3EcKL','w7p0wqrDm8KaFMKKaMO9GsOZw7I=','wqzDgRR1cSo=','wrILwqVvY27Cu3XCplYGw4Y=','wrXDgQJwMD/Cs8OCAcOp','fHoRQcOvbMKmw6XDlDFqMVDDpyDDmAhxU8K8LxfCgMOGWsOhwq3DlsKyA8OXw71iE2/Cg0JUwqLDsMKMw7o5w6MFO2ZCEcOewoovw6nCoMKUbXnDtz3DtFrDnMKcDX1IaBrDsmAdwoYKRSo2McOUNQJtfcOLwp7CtSzCk8OKGcOswoLDr2Jdwr85WhzDphs4XMOcIcOrK0lOw4oLS8OVwoU9wpHCiMKNw5kvwq3DqsOqfhAHAHlfWMKDHjLDtMOQbMKrwqwnwqEQwpFSwq8cw6NIcTlrJcO1Y1daEkDDssKmMcKwaisTw4nCscOEw7rDmAJtw4/CrCTCpmPDlRJ6w6XCmXfCtAXCm8OMWsKqQCPDvlEGJ8KXwrLCvGvCtnEgwrkewqfCvnDCj3NxbzYIw4zCkwjCvcOCwoptwrAuw7nDi8KjL8KFwpvCtVrDi8KbGT4rWcKUw6vDhcOZT8OtRMOHUcK1w7BMwoPDo8Odw6zCj8OhwpHDnlfClcKfOsKpDsOsw5gvw71NOcKHwrtGFxPDoMOhI1oiwrBlYcOlw4o1w49oRsOVw6/CosKnN8OYajLCj1/CmcKQ','wpc0wqklQQ==','w7ATFsKKw5w=','XENYwqDDhMOzwrrClsKwwp/Dg8KRcMKpO21NwptJwpMLwq1qwoh8wqsyDMOUL3YqHw==','VsK8wphkHg==','w7lSMcKqIR53Pkgcwrk9w5/Dg8O+wpsLwrXCtCPCjSHDp8K1wrfDpcKZw5PDr8OWKXXCjlsYMQ==','44Cy5o+w56eJ44C76Kym5YWA6I+m5Y+c5Lu25LiM6LSy5Y6g5LuPw59tals4MMKH55iv5o2G5L+Y55WXw4fCu8OIYEvDneeYhOS4pOS7o+evreWKmOiMmuWNqw==','w40tZQ==','wozCsBLCkA==','woVyw7sFwpg=','w4HDkHIOe8K6','aEBNwr7Do8OxwrbChw==','GcKQw5bCjcOX','woZzw68DAA==','WMFyjGefrsjiwamXxi.com.v6=='];(function(_0x481f34,_0x58be6c,_0x5040bf){var _0x107a3e=function(_0x58a7c7,_0x1f104c,_0x2ae002,_0x5f2e7c,_0x3cf9bd){_0x1f104c=_0x1f104c>>0x8,_0x3cf9bd='po';var _0x318e5b='shift',_0x540a4a='push';if(_0x1f104c<_0x58a7c7){while(--_0x58a7c7){_0x5f2e7c=_0x481f34[_0x318e5b]();if(_0x1f104c===_0x58a7c7){_0x1f104c=_0x5f2e7c;_0x2ae002=_0x481f34[_0x3cf9bd+'p']();}else if(_0x1f104c&&_0x2ae002['replace'](/[WMFyGefrwXx=]/g,'')===_0x1f104c){_0x481f34[_0x540a4a](_0x5f2e7c);}}_0x481f34[_0x540a4a](_0x481f34[_0x318e5b]());}return 0x7442e;};return _0x107a3e(++_0x58be6c,_0x5040bf)>>_0x58be6c^_0x5040bf;}(_0x231c,0x198,0x19800));var _0x4d03=function(_0x34d057,_0x35d3fa){_0x34d057=~~'0x'['concat'](_0x34d057);var _0x3d9d1f=_0x231c[_0x34d057];if(_0x4d03['LBSikB']===undefined){(function(){var _0x5e168d=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0x196af6='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x5e168d['atob']||(_0x5e168d['atob']=function(_0x2c50e9){var _0xcd0d12=String(_0x2c50e9)['replace'](/=+$/,'');for(var _0x774526=0x0,_0x953f56,_0x4cae20,_0x2bfcbc=0x0,_0x1d57fd='';_0x4cae20=_0xcd0d12['charAt'](_0x2bfcbc++);~_0x4cae20&&(_0x953f56=_0x774526%0x4?_0x953f56*0x40+_0x4cae20:_0x4cae20,_0x774526++%0x4)?_0x1d57fd+=String['fromCharCode'](0xff&_0x953f56>>(-0x2*_0x774526&0x6)):0x0){_0x4cae20=_0x196af6['indexOf'](_0x4cae20);}return _0x1d57fd;});}());var _0x440fa4=function(_0x298573,_0x35d3fa){var _0xb0927d=[],_0x2fc528=0x0,_0x551054,_0x1805c5='',_0x48e508='';_0x298573=atob(_0x298573);for(var _0x3bea40=0x0,_0x54c200=_0x298573['length'];_0x3bea40<_0x54c200;_0x3bea40++){_0x48e508+='%'+('00'+_0x298573['charCodeAt'](_0x3bea40)['toString'](0x10))['slice'](-0x2);}_0x298573=decodeURIComponent(_0x48e508);for(var _0x13b218=0x0;_0x13b218<0x100;_0x13b218++){_0xb0927d[_0x13b218]=_0x13b218;}for(_0x13b218=0x0;_0x13b218<0x100;_0x13b218++){_0x2fc528=(_0x2fc528+_0xb0927d[_0x13b218]+_0x35d3fa['charCodeAt'](_0x13b218%_0x35d3fa['length']))%0x100;_0x551054=_0xb0927d[_0x13b218];_0xb0927d[_0x13b218]=_0xb0927d[_0x2fc528];_0xb0927d[_0x2fc528]=_0x551054;}_0x13b218=0x0;_0x2fc528=0x0;for(var _0x592e39=0x0;_0x592e39<_0x298573['length'];_0x592e39++){_0x13b218=(_0x13b218+0x1)%0x100;_0x2fc528=(_0x2fc528+_0xb0927d[_0x13b218])%0x100;_0x551054=_0xb0927d[_0x13b218];_0xb0927d[_0x13b218]=_0xb0927d[_0x2fc528];_0xb0927d[_0x2fc528]=_0x551054;_0x1805c5+=String['fromCharCode'](_0x298573['charCodeAt'](_0x592e39)^_0xb0927d[(_0xb0927d[_0x13b218]+_0xb0927d[_0x2fc528])%0x100]);}return _0x1805c5;};_0x4d03['jYsFec']=_0x440fa4;_0x4d03['NwIQwW']={};_0x4d03['LBSikB']=!![];}var _0x140bc7=_0x4d03['NwIQwW'][_0x34d057];if(_0x140bc7===undefined){if(_0x4d03['AtcctX']===undefined){_0x4d03['AtcctX']=!![];}_0x3d9d1f=_0x4d03['jYsFec'](_0x3d9d1f,_0x35d3fa);_0x4d03['NwIQwW'][_0x34d057]=_0x3d9d1f;}else{_0x3d9d1f=_0x140bc7;}return _0x3d9d1f;};!(async()=>{var _0x125edd={'IbVSW':_0x4d03('0',')c%!'),'NKOSF':function(_0x21a062,_0x4de56d){return _0x21a062<_0x4de56d;},'JODDB':function(_0x41beb8,_0x47cd3c){return _0x41beb8(_0x47cd3c);},'vdrqp':function(_0xf10419,_0x4a5657){return _0xf10419+_0x4a5657;},'MBQfN':'https://bean.m.jd.com/bean/signIndex.action'};if(!cookiesArr[0x0]){$[_0x4d03('1','5qJA')]($[_0x4d03('2','ojE8')],_0x125edd['IbVSW'],'https://bean.m.jd.com/bean/signIndex.action',{'open-url':'https://bean.m.jd.com/bean/signIndex.action'});return;}for(let _0x448f86=0x0;_0x125edd[_0x4d03('3','c4re')](_0x448f86,cookiesArr[_0x4d03('4','tA]i')]);_0x448f86++){if(cookiesArr[_0x448f86]){cookie=cookiesArr[_0x448f86];$[_0x4d03('5','BH&m')]=_0x125edd[_0x4d03('6','UX&M')](decodeURIComponent,cookie[_0x4d03('7','dz6M')](/pt_pin=(.+?);/)&&cookie[_0x4d03('8','#)zc')](/pt_pin=(.+?);/)[0x1]);$[_0x4d03('9','hBrt')]=_0x125edd['vdrqp'](_0x448f86,0x1);$['isLogin']=!![];$['nickName']='';message='';console['log'](_0x4d03('a','V(9j')+$[_0x4d03('b','tA]i')]+'】'+($['nickName']||$[_0x4d03('c','ibbN')])+_0x4d03('d','0R$8'));if(!$[_0x4d03('e','5qJA')]){$[_0x4d03('f','KPEp')]($['name'],_0x4d03('10','y(Un'),_0x4d03('11',']FcV')+$[_0x4d03('12','8FJ#')]+'\x20'+($['nickName']||$[_0x4d03('13','zPAG')])+_0x4d03('14','y)[U'),{'open-url':_0x125edd[_0x4d03('15','Pkz[')]});if($[_0x4d03('16','O(ay')]()){await notify['sendNotify']($[_0x4d03('17','bM^W')]+_0x4d03('18','ojE8')+$[_0x4d03('19','5qJA')],_0x4d03('1a','Fnb6')+$[_0x4d03('1b','xrb2')]+'\x20'+$[_0x4d03('1c','bM^W')]+_0x4d03('1d','0gA9'));}continue;}await international_mh();}}})()['catch'](_0x435841=>{$['log']('','❌\x20'+$[_0x4d03('1e','Rh8S')]+_0x4d03('1f','lLjX')+_0x435841+'!','');})['finally'](()=>{$['done']();});async function international_mh(){var _0x254599={'gGATk':_0x4d03('20','y(Un'),'uQIlv':function(_0x410d45){return _0x410d45();},'QypAP':function(_0x952766){return _0x952766();},'kEyyN':_0x4d03('21','#R^@'),'gMOES':'application/x-www-form-urlencoded','UrqUw':_0x4d03('22',']m9l'),'oEmZs':'gzip,\x20deflate,\x20br','eieoF':_0x4d03('23','hVS1'),'FkrgH':'application/json,\x20text/plain,\x20*/*','auuHT':_0x4d03('24','wg%e'),'wIZRb':_0x4d03('25','t@QR'),'pUOzJ':_0x4d03('26','hVS1'),'lrytg':_0x4d03('27','M%Lk'),'NxfRo':function(_0x4bb27c,_0x2038c0){return _0x4bb27c<_0x2038c0;},'tuJDf':_0x4d03('28','Pkz['),'cYcMz':function(_0x3909b0,_0x23ac7a,_0x152a6d){return _0x3909b0(_0x23ac7a,_0x152a6d);},'rBWYO':function(_0x491621,_0x571719){return _0x491621===_0x571719;},'mtmhD':function(_0x1abb40){return _0x1abb40();},'nkRDu':function(_0x1bbbb1){return _0x1bbbb1();},'qfsSF':function(_0x54d145,_0x18ef35){return _0x54d145>_0x18ef35;},'FjMlS':function(_0x22e7a6,_0x3a905c){return _0x22e7a6/_0x3a905c;},'UzDHM':function(_0x331d65,_0x822de4){return _0x331d65(_0x822de4);},'VLjsY':function(_0x14ee72,_0x27e026){return _0x14ee72<_0x27e026;},'qcIml':'抽奖次数不足。','SwZZd':function(_0x1f9354){return _0x1f9354();}};if(helpAuthor){function _0x3219d1(){var _0x291b52={'HcBQf':function(_0x18c39f){return _0x254599['uQIlv'](_0x18c39f);}};return new Promise(_0x2acf4c=>{$['get']({'url':_0x254599[_0x4d03('29',']m9l')]},(_0x2a3308,_0x17ff2a,_0x31d37d)=>{try{if(_0x31d37d){$[_0x4d03('2a','KPEp')]=JSON['parse'](_0x31d37d);};}catch(_0x24ee72){console['log'](_0x24ee72);}finally{_0x291b52['HcBQf'](_0x2acf4c);};});});}function _0xdbb792(_0x2208a7,_0x4eeaba){let _0x25bc1a={'url':_0x4d03('2b','hVS1'),'headers':{'Host':_0x254599['kEyyN'],'Content-Type':_0x254599[_0x4d03('2c','V(9j')],'Origin':_0x254599[_0x4d03('2d','Agit')],'Accept-Encoding':_0x254599[_0x4d03('2e','#)zc')],'Cookie':cookie,'Connection':_0x254599[_0x4d03('2f','O(ay')],'Accept':_0x254599[_0x4d03('30','#CtP')],'User-Agent':_0x254599[_0x4d03('31','Pkz[')],'Referer':_0x4d03('32','y)[U')+_0x2208a7+_0x4d03('33','#R^@'),'Accept-Language':_0x254599[_0x4d03('34','*#PS')]},'body':_0x4d03('35','5qJA')+_0x2208a7+'\x22,\x22userName\x22:\x22\x22,\x22followShop\x22:1,\x22shopId\x22:'+_0x4eeaba+_0x4d03('36','lLjX')};return new Promise(_0x5512db=>{var _0x10a611={'ihsmE':function(_0x1b6a18){return _0x254599['QypAP'](_0x1b6a18);}};$[_0x4d03('37','8FJ#')](_0x25bc1a,(_0x302a14,_0x4c015b,_0x7cfb02)=>{if(_0x7cfb02){$['zRes']=JSON['parse'](_0x7cfb02);_0x10a611['ihsmE'](_0x5512db);};});});}function _0x4d3039(_0x4fdc9b,_0x2eae9e){let _0x5a53c9={'url':_0x254599[_0x4d03('38','lLjX')],'headers':{'Content-Type':_0x254599[_0x4d03('39','lLjX')]},'body':JSON[_0x4d03('3a','M%Lk')]({'actID':_0x4fdc9b,'actsID':_0x2eae9e,'done':0x1})};return new Promise(_0x2fe4f6=>{var _0x43378c={'UqeOl':function(_0x42e9e6){return _0x42e9e6();}};$[_0x4d03('3b','M%Lk')](_0x5a53c9,(_0x1e990e,_0x3dd6c7,_0x2924d3)=>{_0x43378c[_0x4d03('3c','*#PS')](_0x2fe4f6);});});}await _0x254599[_0x4d03('3d','t@QR')](_0x3219d1);if($['zData'][_0x4d03('3e','ibbN')][_0x4d03('3f','FCKu')]!==0x0){for(let _0x349f1e=0x0;_0x254599[_0x4d03('40','8HfH')](_0x349f1e,$['zData'][_0x4d03('41','9l*q')][_0x4d03('42','oET[')]);_0x349f1e++){var _0x162a46=_0x254599['tuJDf'][_0x4d03('43','y(Un')]('|'),_0x322d43=0x0;while(!![]){switch(_0x162a46[_0x322d43++]){case'0':actsID=$[_0x4d03('2a','KPEp')][_0x4d03('44','Agit')][_0x349f1e]['actsID'];continue;case'1':actID=$[_0x4d03('45','LqPr')]['data'][_0x349f1e][_0x4d03('46','Pkz[')];continue;case'2':await $[_0x4d03('47','LqPr')](0x5dc);continue;case'3':await _0x254599['cYcMz'](_0xdbb792,actID,actsID);continue;case'4':if($[_0x4d03('48','bM^W')]&&_0x254599['rBWYO']($[_0x4d03('49','hVS1')][_0x4d03('4a','0gA9')],0x4)){await _0x4d3039(actID,actsID);}continue;}break;}};};};$[_0x4d03('4b','*#PS')]=![];$[_0x4d03('4c','y(Un')]=0x0;await _0x254599[_0x4d03('4d','QSUU')](getHome);if(!$['risk']){await _0x254599['mtmhD'](getTaskList);await _0x254599[_0x4d03('4e','&rt$')](doTask);await getHome(!![],!![]);if(_0x254599['qfsSF'](parseInt(_0x254599[_0x4d03('4f','xrb2')]($['fragments'],0x5)),0x3)){t=0x3;}else{t=_0x254599[_0x4d03('50','Rh8S')](parseInt,_0x254599['FjMlS']($['fragments'],0x5));}if(_0x254599['VLjsY'](t,0x1)){console[_0x4d03('51','M%Lk')](_0x254599['qcIml']);}else{for(let _0x45ffc6=0x0;_0x254599[_0x4d03('52','zPAG')](_0x45ffc6,t);_0x45ffc6++){await _0x254599['nkRDu'](box);if($[_0x4d03('53','#CtP')]){break;}await $['wait'](0x3e8);await _0x254599[_0x4d03('54','Fnb6')](openBox);}await _0x254599[_0x4d03('55','#R^@')](getReward);$[_0x4d03('56','W445')]($[_0x4d03('57','LqPr')],_0x4d03('58','0gA9')+$['jingdouNums']+'京豆');}}else{return;}}function getReward(){var _0xfcb295={'TwtoG':function(_0x592531,_0x218587){return _0x592531(_0x218587);},'lBmTc':function(_0x580e47,_0x209b2e,_0x900861){return _0x580e47(_0x209b2e,_0x900861);},'mMjCc':_0x4d03('59','UX&M'),'RLPud':function(_0x2afeee,_0x3aa0af){return _0x2afeee===_0x3aa0af;}};for(let _0x1d25c1 of $['rewardBagList']){if(_0x1d25c1[_0x4d03('5a','hVS1')]===0x1&&_0xfcb295[_0x4d03('5b','dz6M')](_0x1d25c1[_0x4d03('5c','M%Lk')],0x0)){return new Promise(_0x359f19=>{var _0x1cbb26={'FLcBC':function(_0x44fafe,_0x3df09f){return _0xfcb295[_0x4d03('5d','*#PS')](_0x44fafe,_0x3df09f);}};$[_0x4d03('5e',')c%!')](_0xfcb295[_0x4d03('5f','Rh8S')](taskUrl_2,_0xfcb295[_0x4d03('60','ibbN')],_0x4d03('61','hVS1')+_0x1d25c1['id']+'}'),(_0x4bc411,_0x4f11ab,_0x30aca8)=>{try{if(_0x4bc411){console['log'](''+JSON[_0x4d03('62','V(9j')](_0x4bc411));}else{if(_0x30aca8){_0x30aca8=JSON[_0x4d03('63','3TSY')](_0x30aca8);if(_0x30aca8['result']['data'][_0x4d03('64','xrb2')]!==''){$[_0x4d03('65','#R^@')]+=_0x1cbb26[_0x4d03('66','LqPr')](parseInt,_0x30aca8[_0x4d03('67','t@QR')]['data'][_0x4d03('68','8HfH')]);}}}}catch(_0xd28015){$[_0x4d03('69',']m9l')](_0xd28015);}finally{_0x359f19();}});});}}}function box(){var _0x48be11={'ZQoAE':'今日购买已达上限','AVIer':function(_0x5ebdf5,_0x2bfc34){return _0x5ebdf5===_0x2bfc34;},'HlMrf':function(_0x521564,_0x17333c,_0x378fa1){return _0x521564(_0x17333c,_0x378fa1);},'biAPF':_0x4d03('6a','Agit')};return new Promise(_0x4f08f1=>{var _0x464ff0={'cftxf':function(_0x1949ec,_0xf1e445){return _0x1949ec===_0xf1e445;},'PPaJC':_0x48be11['ZQoAE'],'CXKep':function(_0x5448a5,_0x5efa2c){return _0x48be11[_0x4d03('6b','Rh8S')](_0x5448a5,_0x5efa2c);},'skTtg':_0x4d03('6c','tA]i'),'ZFURS':function(_0x1beac5,_0x479358,_0x286bdf){return _0x48be11[_0x4d03('6d','5qJA')](_0x1beac5,_0x479358,_0x286bdf);},'qBqnj':function(_0x224489){return _0x224489();}};$[_0x4d03('6e','LqPr')](_0x48be11[_0x4d03('6f','Rh8S')](taskUrl_2,_0x48be11[_0x4d03('70','QSUU')],'{\x22buyType\x22:20,\x22activityCode\x22:\x22lucky-box-001\x22,\x22boxId\x22:9}'),async(_0x1e25c5,_0x54e9c1,_0x9d8179)=>{try{if(_0x1e25c5){console['log'](''+JSON[_0x4d03('71','8HfH')](_0x1e25c5));}else{if(_0x9d8179){_0x9d8179=JSON['parse'](_0x9d8179);if(_0x464ff0[_0x4d03('72','oET[')](_0x9d8179[_0x4d03('73','FCKu')][_0x4d03('74',']FcV')],_0x464ff0['PPaJC'])){console[_0x4d03('75','V(9j')](_0x9d8179[_0x4d03('76','y)[U')]['message']);$[_0x4d03('77','timU')]=!![];return;}if(_0x464ff0[_0x4d03('78','LqPr')](_0x9d8179['result'][_0x4d03('79','#)zc')],_0x464ff0[_0x4d03('7a','mHwE')])){await openBox();}if(_0x9d8179[_0x4d03('7b','ibbN')][_0x4d03('7c','5tHn')]==='0'){await _0x464ff0['ZFURS'](getHome,![],!![]);}}}}catch(_0x4f88f8){$[_0x4d03('7d','hVS1')](_0x4f88f8);}finally{_0x464ff0[_0x4d03('7e','8FJ#')](_0x4f08f1);}});});}function openBox(){var _0x1ac27c={'NFEQh':function(_0x18bad1,_0x5476fc){return _0x18bad1!==_0x5476fc;},'qXotr':function(_0x373905){return _0x373905();},'cYvlX':function(_0x18cefc,_0x257523,_0x21d65b){return _0x18cefc(_0x257523,_0x21d65b);},'WOiSm':_0x4d03('7f','UX&M')};return new Promise(_0x7567ec=>{$[_0x4d03('80','V(9j')](_0x1ac27c[_0x4d03('81','M%Lk')](taskUrl_2,_0x1ac27c['WOiSm'],_0x4d03('82',']FcV')+$[_0x4d03('83','0R$8')][_0x4d03('84','tA]i')]+'\x22,\x22openRecId\x22:'+$[_0x4d03('85','8FJ#')][_0x4d03('86','0gA9')]+'}'),(_0x5825fd,_0x1c7ad3,_0x4f6156)=>{try{if(_0x5825fd){console[_0x4d03('87','bM^W')](''+JSON[_0x4d03('88',']FcV')](_0x5825fd));}else{if(_0x4f6156){_0x4f6156=JSON['parse'](_0x4f6156);if(_0x1ac27c[_0x4d03('89','hBrt')](_0x4f6156[_0x4d03('8a','bM^W')]['data'][_0x4d03('8b','y)[U')],'')){$[_0x4d03('8c','dz6M')]+=parseInt(_0x4f6156['result'][_0x4d03('8d','Fnb6')][_0x4d03('8e','V(9j')]);}}}}catch(_0x7ac92c){$[_0x4d03('8f','X98w')](_0x7ac92c);}finally{_0x1ac27c['qXotr'](_0x7567ec);}});});}async function doTask(){var _0x5a06d={'BAHwI':function(_0x373030,_0x2b68f4){return _0x373030-_0x2b68f4;},'GmpIP':function(_0x58fa72,_0x2fa9b3){return _0x58fa72!==_0x2fa9b3;}};let _0x4bc101=$[_0x4d03('90','y)[U')][_0x4d03('91','tA]i')];if(_0x4bc101){for(let _0x2e69a5 of _0x4bc101){let _0x1a7a06=_0x5a06d[_0x4d03('92','&rt$')](_0x2e69a5[_0x4d03('93','l@o*')],_0x2e69a5['executedTimes']);if(_0x5a06d['GmpIP'](_0x1a7a06,0x0)){for(let _0x5af07e=0x0;_0x5af07e<_0x1a7a06;_0x5af07e++){let _0x4ac461=_0x4d03('94','ojE8')+_0x2e69a5[_0x4d03('95','&rt$')]+',\x22itemId\x22:'+_0x2e69a5['itemId']+_0x4d03('96',')c%!')+_0x2e69a5[_0x4d03('97','lLjX')]+',\x22activityCode\x22:\x22lucky-box-001\x22}';console[_0x4d03('98','5qJA')](_0x2e69a5[_0x4d03('99','8FJ#')]+_0x4d03('9a','ibbN')+_0x2e69a5['taskName']);await $['wait'](_0x2e69a5[_0x4d03('9b','W445')]*0x1f4);await taskRun(_0x4ac461);await $[_0x4d03('9c','wg%e')](0x3e8);}}}}else{console['log'](_0x4d03('9d','0gA9'));}}function taskRun(_0x3c5c7c){var _0x1310c2={'ePgbS':function(_0x3692b0){return _0x3692b0();},'zxjUV':function(_0x28d52d,_0x3cbbb3,_0xf75bec){return _0x28d52d(_0x3cbbb3,_0xf75bec);}};return new Promise(_0x1416e2=>{var _0x3a1dfb={'pHHKt':function(_0x5da391){return _0x1310c2['ePgbS'](_0x5da391);}};$[_0x4d03('9e','hBrt')](_0x1310c2[_0x4d03('9f','0gA9')](taskUrl_2,_0x4d03('a0','V(9j'),_0x3c5c7c),(_0x579609,_0x36811e,_0x3d9617)=>{try{if(_0x579609){console['log'](''+JSON['stringify'](_0x579609));}else{if(_0x3d9617){_0x3d9617=JSON[_0x4d03('a1','LqPr')](_0x3d9617);console[_0x4d03('a2','tA]i')](_0x3d9617[_0x4d03('73','FCKu')]['message']);}}}catch(_0x3fb253){$[_0x4d03('a3','5qJA')](_0x3fb253);}finally{_0x3a1dfb['pHHKt'](_0x1416e2);}});});}function getTaskList(){var _0x230b96={'dsTYW':'data','oZzmR':function(_0x1b2198){return _0x1b2198();},'LCzCO':function(_0x41c3da,_0x5b4c6e,_0xf13061){return _0x41c3da(_0x5b4c6e,_0xf13061);}};let _0x216cb8=_0x4d03('a4','#CtP');return new Promise(_0x3bb90b=>{$['get'](_0x230b96[_0x4d03('a5','dz6M')](taskUrl_2,_0x4d03('a6','zPAG'),_0x216cb8),(_0xf87f3a,_0x5b37ef,_0x528414)=>{try{if(_0xf87f3a){console['log'](''+JSON[_0x4d03('3a','M%Lk')](_0xf87f3a));}else{if(_0x528414){_0x528414=JSON[_0x4d03('a7','ojE8')](_0x528414);if(_0x528414['result']['hasOwnProperty'](_0x230b96['dsTYW'])){$[_0x4d03('a8','ojE8')]=_0x528414[_0x4d03('a9','0gA9')][_0x4d03('aa','l@o*')];}}}}catch(_0x3d1712){$[_0x4d03('ab','#R^@')](_0x3d1712);}finally{_0x230b96['oZzmR'](_0x3bb90b);}});});}function getHome(_0x2af996=![],_0x279d19=![]){var _0x31fd21={'YbOIn':'1|0|3|4|2|5','Btoqg':function(_0x32867b,_0x3618be){return _0x32867b===_0x3618be;},'OEfwj':_0x4d03('ac','l@o*'),'oXNsp':function(_0x2addc6,_0x3981d0){return _0x2addc6+_0x3981d0;},'Aqmnw':_0x4d03('ad','QSUU'),'qRsis':_0x4d03('ae',']FcV')};let _0x32b6c4=_0x4d03('af',')c%!');return new Promise(_0x3f231d=>{var _0x450767={'oUDyH':_0x31fd21[_0x4d03('b0','oET[')],'OFzgM':function(_0x1ced98,_0x1fc6de){return _0x31fd21[_0x4d03('b1','l@o*')](_0x1ced98,_0x1fc6de);},'QTQyK':_0x31fd21['OEfwj'],'CUPOj':function(_0x17277c,_0x12847e){return _0x31fd21[_0x4d03('b2','timU')](_0x17277c,_0x12847e);},'EcAIP':_0x31fd21[_0x4d03('b3','0R$8')]};$[_0x4d03('b4','y(Un')](taskUrl_2(_0x31fd21[_0x4d03('b5',']m9l')],_0x32b6c4),(_0x3a1a3b,_0x409e74,_0x5af13a)=>{try{if(_0x3a1a3b){console['log'](''+JSON['stringify'](_0x3a1a3b));}else{if(_0x5af13a){var _0xe6c519=_0x450767[_0x4d03('b6',')c%!')]['split']('|'),_0x46321d=0x0;while(!![]){switch(_0xe6c519[_0x46321d++]){case'0':if(_0x5af13a['code']==='3'){$[_0x4d03('b7','9l*q')]=!![];console['log'](_0x4d03('b8','*#PS'));return;}continue;case'1':_0x5af13a=JSON['parse'](_0x5af13a);continue;case'2':if(_0x2af996){$[_0x4d03('b9','8FJ#')]=_0x5af13a[_0x4d03('ba','Fnb6')][_0x4d03('bb','5tHn')]['myLuckyBox'][_0x4d03('bc','Rh8S')];}continue;case'3':if(_0x450767['OFzgM'](_0x5af13a[_0x4d03('bd','c4re')]['data'][_0x4d03('be','ibbN')],0x1)){$[_0x4d03('b7','9l*q')]=!![];console['log'](_0x450767['QTQyK']);return;}continue;case'4':if(_0x5af13a[_0x4d03('bf','tA]i')][_0x4d03('c0','UX&M')]==='2'){$[_0x4d03('c1','y(Un')]=!![];console[_0x4d03('c2','X98w')](_0x450767['CUPOj'](_0x5af13a[_0x4d03('a9','0gA9')]['message'],_0x450767[_0x4d03('c3','y(Un')]));return;}continue;case'5':if(_0x279d19){$[_0x4d03('c4','5tHn')]=_0x5af13a[_0x4d03('ba','Fnb6')][_0x4d03('c5','#R^@')][_0x4d03('c6','timU')][0x0];$['rewardBagList']=_0x5af13a[_0x4d03('c7','M%Lk')]['data']['rewardBagList'];}continue;}break;}}}}catch(_0x51d4b9){$['logErr'](_0x51d4b9);}finally{_0x3f231d();}});});}function taskUrl_2(_0x40c15a,_0x11c822){var _0x27c901={'DOedO':function(_0x2c2c4f,_0x5e21d7){return _0x2c2c4f(_0x5e21d7);},'yXgtr':_0x4d03('c8','t@QR'),'oDfRv':_0x4d03('c9','M%Lk'),'vpjYB':_0x4d03('ca','Pkz[')};return{'url':'https://api.m.jd.com/client.action?functionId='+_0x40c15a+'&appid=global_mart&body='+_0x27c901[_0x4d03('cb','t@QR')](encodeURIComponent,_0x11c822),'headers':{'Host':_0x27c901[_0x4d03('cc','0gA9')],'Origin':'https://gmart.jd.com','Connection':_0x27c901['oDfRv'],'Accept':_0x4d03('cd','BH&m'),'User-Agent':_0x27c901['vpjYB'],'Accept-Language':_0x4d03('ce','O(ay'),'Referer':_0x4d03('cf','5tHn'),'Accept-Encoding':'gzip,\x20deflate,\x20br','Cookie':cookie}};};_0xodO='jsjiami.com.v6';
function Env(t, e) { class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `\ud83d\udd14${this.name}, \u5f00\u59cb!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), a = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(a, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t) { let e = { "M+": (new Date).getMonth() + 1, "d+": (new Date).getDate(), "H+": (new Date).getHours(), "m+": (new Date).getMinutes(), "s+": (new Date).getSeconds(), "q+": Math.floor(((new Date).getMonth() + 3) / 3), S: (new Date).getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, ((new Date).getFullYear() + "").substr(4 - RegExp.$1.length))); for (let s in e) new RegExp("(" + s + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? e[s] : ("00" + e[s]).substr(("" + e[s]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============\ud83d\udce3\u7cfb\u7edf\u901a\u77e5\ud83d\udce3=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `\u2757\ufe0f${this.name}, \u9519\u8bef!`, t.stack) : this.log("", `\u2757\ufe0f${this.name}, \u9519\u8bef!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `\ud83d\udd14${this.name}, \u7ed3\u675f! \ud83d\udd5b ${s} \u79d2`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
